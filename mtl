#!/bin/sh

MTL_DIR="/home/$USER/.medial_temporal_lobe"
USAGE="$0 add [url]"

# Check input
if ! test -e "$MTL_DIR"; then
    echo "You must create $MTL_DIR."
    exit 1
elif test "$1" != 'add'; then
    echo Only the \"add\" action is supported right now.
    exit 1
elif test "$#" != '2'; then
    echo $USAGE
    exit 1
fi

# The URL
url="$2"

# Save the page.
uuid=$(uuidgen)
mkdir -p "$MTL_DIR/memories/$uuid"
wget -O "$MTL_DIR/memories/$uuid/source" "$url"

# Save some information.
echo "url=$2" > "$MTL_DIR/memories/$uuid/info"
echo added=$(date --rfc-3339 ns) >> "$MTL_DIR/memories/$uuid/info"

